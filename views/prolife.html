<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mi perfil</title>
    <!-- CDN de Bootstrap 5-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- CDN BoxIcons -->
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <!-- Enlace Css -->
    <link rel="stylesheet" href="../assets/css/editprolife.css">
</head>

<body>
    <!-- SIDEBAR -->
    <section id="sidebar">
        <a href="AdminPanel.html" class="brand"><img src="../assets/img/Clover.png" class="logo_img">Clover</a>
        <ul class="side-menu">
            <li><a href="AdminPanel.html" class="active"><i class='bx bxs-dashboard icon'></i> Dashboard</a></li>
            <li class="divider" data-text="Panel de navegacion"></li>
            <!-- Modulo usuarios-->
            <li>
                <a href="#">
                    <i class='bx bxs-user icon'></i> Usuarios
                    <i class='bx bx-chevron-right icon-right'></i>
                </a>

                <ul class="side-dropdown">
                    <li><a href="listUsers.html">Lista de usuarios</a></li>
                    <li><a href="addUser.html">Agregar usuario</a></li>
                </ul>
            </li>
            <!--Modulo Articulos-->
            <li>
                <a href="#">
                    <i class='bx bxs-package icon'></i> Articulos
                    <i class='bx bx-chevron-right icon-right'></i>
                </a>
                <ul class="side-dropdown">
                    <li><a href="productsList.html">Lista de articulos</a></li>
                    <li><a href="addProduct.html">Agregar articulos</a></li>
                </ul>
            </li>
            <!--Modulo de mesas-->
            <li>
                <a href="#">
                    <i class='bx bx-table icon'></i> Mesas
                    <i class='bx bx-chevron-right icon-right'></i>
                </a>
                <ul class="side-dropdown">
                    <li><a href="tableList.html">Lista de mesas</a></li>
                    <li><a href="addTable.html">Agregar mesas</a></li>
                </ul>
            </li>
            <!--Modulo de ventas-->
            <li>
                <a href="#">
                    <i class='bx bx-bar-chart icon'></i> Ventas
                    <i class='bx bx-chevron-right icon-right'></i>
                </a>
                <ul class="side-dropdown">
                    <li><a href="orderlist.html">Lista de ventas</a></li>
                    
                </ul>
            </li>
            <!--Modulo de configuraciones-->
            <li class="divider" data-text="Opciones">Opciones</li>
            <li>
                <a href="#">
                    <i class='bx bxs-cog icon'></i> Configuración
                    <i class='bx bx-chevron-right icon-right'></i>
                </a>
                <ul class="side-dropdown">
                    <li><a href="Companydata.html">General</a></li>
                    <li><a href="prolife.html">Perfil</a></li>
                </ul>
            </li>
        </ul>
    </section>
    <!-- SIDEBAR -->

    <!-- NAVBAR -->
    <section id="content">
        <!-- NAVBAR -->
        <nav>
            <i class='bx bx-menu toggle-sidebar'></i>
            <form action="#">
                <div class="form-group">
                    <input type="text" placeholder="Buscar...">

                </div>
            </form>

            <span class="divider"></span>
            <div class="profile">
                <img src="" alt="" id="imagen-nav">
                <ul class="profile-link">
                    <li><a href="prolife.html"><i class='bx bxs-user-circle icon'></i> Perfil</a></li>
                    <li><a href="Companydata.html"><i class='bx bxs-cog'></i>Configuracion</a></li>
                    <li><a href="#" id="btnSalir"><i class='bx bxs-log-out-circle'></i>Salir</a></li>
                </ul>
            </div>
        </nav>
        <!-- NAVBAR -->

        <!-- MAIN -->
        <main>

            <div class="container">
                <div class="row gutters">
                    <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                        <div class="card h-100">
                            <div class="card-body" style="background-color: white;">
                                <div class="account-settings">
                                    <div class="user-profile">

                                        <form id="imageForm" enctype="multipart/form-data">
                                            <div class="user-avatar">
                                                <input type="file" id="imageInput" accept=".jpg, .jpeg, .png" required
                                                    style="display: none;">

                                                <img src="" alt="" id="imagenMostrada">
                                            </div>

                                        </form>

                                        <h5 class="user-name"></h5>
                                        <h6 class="user-email"></h6>
                                    </div>
                                    <div class="about">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-9 col-lg-9 col-md-12 col-sm-12 col-12">
                        <div class="card h-100">

                            <form id="miFormulario">
                                <div class="card-body" style="background-color: white;">
                                    <div class="row gutters">
                                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                            <h5 class="mb-2 text-success">Datos del perfil</h5>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                            <div class="form-group">
                                                <label for="fullName">Nombre</label>
                                                <input type="text" class="form-control" id="nombre" name="nombre"
                                                    required>
                                            </div>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                            <div class="form-group">
                                                <label for="rol">Rol</label>
                                                <input type="text" class="form-control" id="rol" name="rol"
                                                    value="Administrador" readonly style="cursor: not-allowed;">
                                            </div>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                            <div class="form-group">
                                                <label for="usuario">Usuario</label>
                                                <input type="text" class="form-control" id="usuario" name="usuario"
                                                    required>
                                            </div>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                            <div class="form-group">
                                                <label for="contrasena">Contraseña</label>
                                                <input type="password" class="form-control" id="contrasena"
                                                    name="contrasena" required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row gutters">
                                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                            <h6 class="mt-3 mb-2 text-success">Datos de contacto</h6>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                            <div class="form-group">
                                                <label for="telefono">Teléfono</label>
                                                <input type="number" class="form-control" id="telefono" name="telefono"
                                                    required maxlength="10">
                                            </div>
                                        </div>
                                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                            <div class="form-group">
                                                <label for="correo">Correo</label>
                                                <input type="email" class="form-control" id="correo" name="correo"
                                                    required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row gutters">
                                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                            <div class="form-group" style="opacity: 0; padding: 0; border-radius: 0">
                                                <label for="id">ID del Usuario</label>
                                                <input type="text" class="form-control" id="id" name="id" required
                                                    value="1">
                                            </div>
                                        </div>
                                        <div class="text-right" style="margin: 10px;">
                                            <button type="button" id="actualizar"
                                                class="btn" style="background-color:#049935;color: white;">Actualizar</button>
                                            <button type="button" id="cancelar" class="btn" style="background-color:#FC3B56"><a
                                                    href="AdminPanel.html" style="color: white;">Salir</a></button>
                                        </div>
                                    </div>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
            </div>

        </main>
        <!-- MAIN -->
    </section>

    <!--Script de Bootstrap 5-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="../assets/js/Myprolife.js"></script>
    <script src="../assets/js/sidebar.js"></script>
    <script src="../models/updateProlifeModel.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const imagenMostrada = document.getElementById('imagenMostrada');
            const imageNav = document.getElementById('imagen-nav');
            const otrasImagenes = document.querySelectorAll('.otra-imagen'); // selecciona todas las etiquetas con la clase 'otra-imagen'
            const imageInput = document.getElementById('imageInput');

            // Obtener la imagen desde Local Storage si existe
            const rutaImagen = localStorage.getItem('rutaImagen');

            if (rutaImagen) {
                imagenMostrada.src = rutaImagen;
                imageNav.src = rutaImagen;

                // Establecer la misma imagen en otras etiquetas img
                otrasImagenes.forEach((imagen) => {
                    imagen.src = rutaImagen;
                });
            } else {
                imagenMostrada.src = '../assets/imgUsers/imgPerfil.jpg';
                imageNav.src = '../assets/imgUsers/imgPerfil.jpg';

                // Establecer la misma imagen en otras etiquetas img
                otrasImagenes.forEach((imagen) => {
                    imagen.src = '../assets/imgUsers/imgPerfil.jpg';
                });
            }

            // Agregar un evento para cambiar la imagen cuando el usuario selecciona un archivo
            imageInput.addEventListener('change', (e) => {
                const file = e.target.files[0];

                if (file) {
                    const reader = new FileReader();
                    reader.onload = function () {
                        const rutaImagenTemporal = reader.result;
                        localStorage.setItem('rutaImagen', rutaImagenTemporal);
                        imagenMostrada.src = rutaImagenTemporal;
                        imageNav.src = rutaImagenTemporal;

                        // Establecer la misma imagen en otras etiquetas img
                        otrasImagenes.forEach((imagen) => {
                            imagen.src = rutaImagenTemporal;
                        });
                    }
                    reader.readAsDataURL(file);
                }
            });
        });
    </script>
</body>

</html>